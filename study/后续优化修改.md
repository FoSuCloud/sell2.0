## 1.添加界面转场动画
* 转场动画就是在我们的界面跳转的时候看到的动画效果，一般指的是手势的滑动等
* 需要注意的是:单页应用模式SPA才可以实现转场动画(手机app)；多页应用模式MPA无法实现；simple，much
* 流程:在App.vue中给router-view及嵌套的keep-alive再嵌套一个transition；之后给transition一个名称，给router-view一个class名称(为了能够设置样式)
* 最后再设置css样式，由于我们没有判断是左移动还是右移动，所以除了设置动画时间，就仅仅设置透明度为0

## 2.css sticky footer布局改进
* 我们通过设置父元素display:fixed;height:100%;上面内容元素min-height:100%;padding-bottom:48px;还有关闭按钮margin-bottom:20px实现了css sticky footer布局
* 这个布局主要就是设置上面内容元素最小高度，使得关闭按钮至少要在某个位置，如果内容增多就继续下滑改变位置；但是有个问题:始终要下滑才能点击关闭按钮
* 解决方案:修改最小高度，合理分配高度，内容元素占百分比和关闭按钮占百分比高度，这样子内容少的时候就不需要下滑了

## 3.懒加载
* 这个功能我们之前实现过，但是我觉得这种懒加载是不靠谱的! 
* 之前的懒加载实现是通过设置一个按钮，每次点击这个按钮就去请求下一页的图片然后加载出下一页的图片，需要我们后端人员给出的图片有页数字段，但是每一页多少张图片却不一定是恒数，而且现在很少用点击加载了
* 所以我们想实现下拉上滑加载

## 4.下拉上滑加载(亟待实现)
## 5.界面左右滑动加载(亟待实现)

## 6.项目结构优化
* 1. components文件夹改为：`buy-buy.vue`,`my-my.vue`,`home-(seller文件夹，home.vue),seller文件夹有beforegood,goods,ratings,goods四个文件`，`subcomponents文件夹存放各种(无关路由)小组件`
* 2. 由于项目结构的优化，所以我把所有的vue文件都检查一遍，把相应的路径更新一遍，`需要注意bg-image()方法，该方法中默认路径为../../../,但是我们的组件不再一个组件一个文件夹`
* `所以把maxin.styl中修改一下，不再有默认前缀路径，然后再把所有的vue文件中的bg-image方法的字符串添加相应的前缀路径，不添加的话执行npm run dev会报错说loader错误之类的其实就是找不到图片`
* 3. 另外把router的index.js文件的导入文件路径修改一下，否则没法指定路由使用的组件，另外对于home路由路径使用`重定位redirect，嵌套路由children`
* 注意: index.js中home路由的`{path:'', name:'goods', component:goods},`指的是进入了home路由所指向的页面之后默认把goods组件设为该页面的router-view的界面，而不是重定位！

## 7.修改模拟数据结构
* 1. 由于我们需要多个商家，所以把data.json文件结构修改一下，并添加几个商家进去,结构修改为`{business:[{"id":1,"seller":[]},{"id":2,"seller":[]}]}`
* 注意`data.json中的数字不能用01这样，只能用1，否则报错说请求失败`，`请求不可以用api/all,用api/alls才行`，`此外修改了data.json需要重启否则可能无效`
* 2. webpack.dev.conf.js新增获取整个文件的请求(api/alls)，另外增加函数`getdata(id,type)`获取相应商家的相应数据
* 3. 由于我们有多个商家，所以针对每个商家的请求应该都不同，所以把home.vue,beforegood.vue,ratings.vue,seller.vue,goods.vue等文件的请求添加一个 `"?id="+this.id`
 * `"?id="+this.id`是在路由中显示参数的，所以需要在webpack.dev.conf.js中用`req.query.id`解析id,然后调用getdata(id,type)获取相应的数据
 * `不要用` 还有一种方式是`"/:id"+this.id`,这种方式就不是参数而是直接显示为路径了，这个时候使用params去解析,但是这样不是我们想要的参数的形式，而且到了后面会崩的。所以我用了又修改了
* 4. 修改完了之后还要修改prod.server.js文件的请求(如果投入生产环境的话)
* 5. vue-router中的params和query,对应的是 /1 ; ?id=1 这两种形式


## 8.没拿到数据?
* 错误:`错误显示id=没有取得this.id，500错误`
* `原因分析`:本次分析的是home.vue，我们一点开页面，立马就报错，为什么？因为home.vue中使用了子组件beforegood.vue，而这个子组件已经被创建了，这个子组件被创建了，那么beforegood.vue中的router-link(显示为a元素),router-view(没显示但是已被占位)等元素也会立马出现在DOM文档中
* 而我们需要警惕的是，我们在路由index.js文件中设置了home路径默认的router-view是goods.vue，所以一点开页面就会默认去创建goods组件元素，但是！`goods.vue中有created周期函数需要id，那么问题来了，id从哪来？`
* 我们想要让goods.vue组件拿到id,那么有两种方法，一是使用vuex,在home.vue点击商家请求商家数据的时候把id存到vuex仓库中，然后goods.vue的data设置一个return id获得id，然后再在created函数中执行请求
* 第二种方法，很遗憾，我用的是第二种方法，我把home.vue点击之后执行请求设为async异步函数，但是这样没用啊，我需要的是同步函数等到拿到数据再执行下一步，所以使用await让请求一直执行，后面的代码等待请求,async和await要配合使用，await只有在async声明的函数中才有用
* 执行请求之后给数据赋值就可以了吗？`不行！`我也以为可以了，但是不行，赋值了但是没有实时更新，vue的更新是周期更新，所以我使用this.$nextTick等到DOM更新再显示beforegood.vue，否则我们看到的可能是还没有渲染好的页面
* `这样行了吗？不行`我们还需要给beforegood.vue的router-view一个v-if，必须等到接收到id数据再创建该元素然后默认执行goods.vue中的请求，因为我们之前的两步都算是不让界面显示，这一步`v-if`才是重中之重
---
* 其实(async,await)和nextTick有nextTick就够了，只要数据传过去了就可以放心显示了，需要注意的是v-if必须拿到数据才显示
* 试错验证：1. 可以去掉beforegood.vue中的v-if试试效果  2. 可以在goods.vue中去掉created函数，正是因为该函数中的请求需要id才导致的错误
`感悟:讲真，这种错误真的要分析一下报错原理，而且多试试，否则没法解决的`

## 9.滚动事件相应的坑
* 1. (之前的坑，可能我想错了，所以~) 如果我们点开商家页面，然后购买东西，触发了首页的数据更新的话，那么再次回到首页，可能没办法滑动
* `背后原理,我们设置v-show，那么设置created函数中函数只能执行一次，因为该元素只被创建一次，即使被隐藏也没有被销毁嘛，所以需要设置updated，元素中数据更新的时候也执行滚动事件；但是我们设置v-if的话，那么我们退出了页面也就是销毁了页面，那么在created中有一个滚动事件就够了，毕竟每次重建都会执行`
* 2. 刷新失败，背后原因可能是因为使用better-scroll的错误，如使用ref绑定的元素是li等组元素，不适合绑定；如我们绑定的元素结构为 div{div span div},这样是不行的，子元素只能有一个，可以加个wrapper,结构应为div{div{div span div}};
* 3. 最坑的是(没法滚动)高度问题:`首先我们举例子ratings.vue,`绑定的元素是template下的根元素.ratings,然后下面元素是ratingsConent；`重点来啦`，我刚开始没有给.ratings父元素设置高度，所以有两种结果，即使给ratingsConent设置高度为100%，得到的依旧是父元素高度0的100%，0；
* 所以在created函数中设置this.$refs.ratings.style.height=window.innerHeight-174+'px'，把.ratings元素的高度定好，然后`ratingsConent的高度应该是大于被绑定的父元素的`,这样才可以滚动嘛，而且我们也使用"父相子绝"来设置位置。这样一波操作下来应该就可以滚动了
* 4. 注意:滚动事件的关键在于绑定的元素要有高度，而且高度小于根子元素，而且不要设置overflow:scroll这样是出现了滚动条，但是我们项目是针对移动端的，所以基本不滚动，有下移移动就可以了
---
* 在我们设置绑定元素的宽度之前，商家的商家页面seller.vue的宽度过大是因为图片多了，而且不换行white-space:nowrap,所以父元素一定要设置宽度，否则宽度会被撑开，部分内容会被隐藏

## 10.input元素
* 1. home.vue中的头部input框不能输入原因，z-index设为-1了，默认被挡住，还有一个可能的原因，被其他层覆盖了，但是这个层是透明的
* 2. placehold指的是输入框未输入值时显示的文字，而value则是即使在输入框中聚焦了依旧会存在的文字，需要手动删除
* 3. `需要解决一个问题`:我希望聚焦到输入框的时候，但是还没对此增加相应的样式就可以变色了，但是边框所有部分都会变色，而我只希望圆角部分变色，不要多余的背景部分
---
* 使用outline:none去掉外边框，这样聚焦的时候就不会有边框变色
* 然后给输入框一个 &:focus样式，当我们单击输入框的时候，如果输入文字，文字的颜色就会改变


## 11.路由问题
* 当我进入首页之后，url地址是/home,然后点击商家图片进入商家详情页面
* 1. 设置router-link,点击商家图片就是进入了/home/goods，但是我们点击退出按钮的时候，退出了，然后再次进入商家页面显示的却是刚开关闭前的页面
* 2. 然后我傻傻的用`// url地址回退 window.history.back();`，但是这样是没用的，因为我点击退出按钮之前上一个页面可能是/home/seller,而不是/home
* 3. 最后我想着还是使用beforegood.vue当做子组件来使用了，但是还是有问题，因为我们仅仅是刚创建的时候默认进入goods.vue组件，当我们上一次退出的时候也仅仅是display:none罢了，元素并没有被销毁，所以只有在我们点击/goods,/seller这些按钮的时候才会刷新页面
* `我想过解决思路，可以试试给beforegood.vue来个大变动，把router-link改为触发事件，然后把router-view直接改为goods,seller,ratings三个子组件，但是需要设置v-if仅仅触发事件选中之后才创建，但是存在一个问题，刚进来的时候怎么选中goods?所以预设的数据应该默认是goods这边的，然后路由的index.js又要改了~`
* [vue-router的使用](https://blog.csdn.net/crazywoniu/article/details/80942642)

## 12.收藏按钮失效
* 我们第一次进入商家页面获取的localStorge中的收藏与否数据是正确的，但是再次进入，每次都是和第一个数据一样的了！这是因为收藏按钮仅仅在创建的时候才获取值，所以一直没销毁就一直没更新
* 解决方法，使用watch来监听id的变化，每当id变化都重新让favorite去取值，代码为:` watch{	id(old,new){ this.favorite=loadFromLocal(this.id, 'favorite', false) }}`

## 13.vuex使用
* 首先下载然后导入vuex,在main.js中使用Vue.use(vuex),创建一个仓库store,`var store=new Vuex.Store({	state:{data:''},	matutions:{	updatedata(){}}});`,然后在vue实例中应用该store
* state指的是存储的数据(各个组件共享，可用可不用)；mutations里面是各个函数，这些函数可以改变共享数据，`组件改变共享数据的方法为 this.$store.commit('函数名')`
* 组件使用共享数据的一般方法是通过computed属性，一有改变就立马更新，如 `首先设置一个使用computed属性的html元素，如<p v-show="show"></p> 然后再computed:{ show(){	return this.$store.state.data;}}`

## 14. vuex小应用案例
* 以main.js中state的homeshow数据为例，刚开始1默认为false,然后在app.vue中设置tab为v-show="!show"，show对应着computed中一个函数show,返回的是state中的数据homeshow,代码为`return this.$store.state.homeshow;`
* 并且home.vue中也用到了homeshow数据，也设置了!show，也就是home.vue和app.vue中的某元素一起显示或者一起消失；另外当点击商家页面的时候，商家详情页面使用的是show，与app.vue,home.vue相反，就是goods.vue中的某元素显示时，app.vue,home.vue的某些元素不显示
* 而我们改变homeshow数据使用的是mutation属性中的方法changehomeshow，代码为:`this.$store.commit('changehomeshow');`

## 15.git取消远程
* 由于改动较多，所以在git上面新建了一个项目2.0,所以我们需要重新上传
* 首先需要`取消远程  git remote remove origin`，然后的代码就和之前的一样
* `1. git init ; 2.git add . 3. git commit -m "first" ; 4.git -u oigin master`

## 16.新增图标文本
* 1. 首先进入网站[图标文本](https://icomoon.io)，然后按照[第一天](https://github.com/FoSuCloud/sell2.0/blob/master/study/%E7%AC%AC%E4%B8%80%E5%A4%A9.md)的教程去下载图标文本
* 2. 需要注意的是`点击下载之后要点隔壁的设置，选择加载styl文件`，但是和我们之前的有点不同，多了一个`variable`文件
* 3. 这个文件也需要添加，并且修改路径为`icomoon-font-path ?= "../fonts"`,还有fonts文件夹中的文件也全部需要更新

## 17.input输入框中添加图标
* 以home.vue中的搜索框为例，添加一个父元素div,结构为 `div{ icon input}`，父元素的位置设为相对位置，icon设为绝对位置，当做父元素的背景
* 注意我们在这里是使用图标文本，其实使用图片也可以使用的，但是还有一个问题`选中输入框的时候，搜索图标不会一起变色`
---
* 搜索框自动聚焦: 在input元素中添加 autofocus="autofocus"
* value和placeholder中的文字左边距使用`padding:0 20px`
---
* 选中输入框会有突出效果，取消效果用`outline:0`

## 18.webpack中的src被识别为字符串
* 1. `assets`：在项目编译的过程中会被webpack处理解析为`模块依赖`，只支持相对路径的形式，如< img src=”./logo.png”>和background:url(./logo.png),”./logo.png”是相对资源路径，将有webpack解析为模块依赖
* 2. `static`：在这个目录下文件不会被webpack处理,简单就是说存放第三方文件的地方，`不会被webpack解析`。他会直接被复制到最终的打包目录(默认是dist/static)下。必须使用绝对路径引用这些文件，这是通过config.js文件中的build.assetsPublic和build.assertsSubDirectory链接来确定的。任何放在static/中文件需要以绝对路径的形式引用：/static[filename]
* 3. 遇到的问题:在img的src中使用相对路径或者绝对路径都无法加载出图片
* 原因:`在webpack中会将图片来当做模块来用`,因为是动态加载的，所以url-loader将无法解析图片地址
* 解决方法:1. 当做模块导入，import home from '../../assets/logo.png'
* 2. 多个图片的时候，使用[{src:require('../../assets/advertisement/1.jpg')}],原理也是使用模块导入

## 19.setTimeout,setInterval中的this
* 虽然之前学过计时器和定时器中的this指向的都是window，因为这两个都是函数，但是应用中还是忘了。。
* 在roundmap.vue中设置轮播图，但是vue中和js中不一样，因为我们使用的是data中的数据，然后习惯性的使用this.data，所以就一直在找错
* 但是在setTimeout这些中，this指向的是window,不是vue实例，所以我们找不到！结果是undefined
* 然后解决方法:`在created中设置计时器setInterval,然后按时调用一个函数，这个函数中如果data的数据小于图片长度，那么+1，否则为0`

## 20.图标界面轮播图
* 1. 由于图标界面是由各个图标组成的，所以我使用flex布局，然后第一面有两行，所以分成两个ul，否则不好做自适应布局，因为我设置的是左右填充，然后每一行规定死是4个图标，否则不规定会变成8个
* 好处就在于设置flex:1之后，图标的li会自适应宽度，四个就一样大了，然后我们还需要给img元素一个决定定位，相对的,li元素应该是相对定位，然后img元素设置left:0,right:0,margin:auto变成左右居中
* 2. 另外还需要在图标之后添加文字，通过给图标设置绝对定位bottom:0,还有left:0.right:0,text-align:center来实现
* 3. 但是怎么让图标界面轮播呢？首先创建第二版的界面,然后我再实现的时候发现自己想错了，虽然可以实现，但是应该是监听手势来拖动的才对，所以应该使用scrollx
* 4. `可以拖动了，但是会拖到另一个界面`,这是因为没给父元素设置overflow:hidden,导致出现了横向滚动条！
* 5. `可以拖动了，但是没办法获取滚动宽度`


## 21.vue中的`$`符号
* 一般使用 this.$refs,this.$store,this.$axios,这些都是`vue实例的属性或者方法`，app.vue
* 而this.show(),this.msg这些不使用 $ 的都是我们`自定义的属性或方法`

## 22.购买页面paymoney
* 1. paymoney.vue是goods.vue的子组件，接收goods.vue传递的seller,selectFoods;需要注意的是,paymoney.vue是直接覆盖在goods.vue组件上面的，所以z-index:5,另外要使用v-if="mymoneyshow",mymoneyshow是在computed上面的函数
* 2. mymoneyshow返回的是store中的moneyshow，moneyshow默认为false,当点击了已结算的时候才是true;然后在paymoney.vue中destory函数会再次改变这个值，使得paymoney组件隐藏，因为调用了store找那个mutation的changemoneyshow方法
* 3. 优惠:'虽然在js中可以算出来优惠价格，但是太麻烦了，所以在data中还是添加`least,reduce字段代表满减最低价格，和满减额度`'
* 4. 在maxin.styl封装一个2px的粗虚线，虚线不使用solid,而是用dotted,表示点状
* 5. 设置数组宽度，如果使用ref绑定li这些数组元素，那么不能直接设置元素的宽度，而应该遍历设置，如使用forEach
* 6. `尚未实现渐变色`
---
* 渐变色通过background:linear-gradient()实现，里面有几个参数，前两个是方向，后面两个是其起始颜色和终止颜色，颜色的参数也可以有多个
* [渐变色](https://www.cnblogs.com/dodocie/p/7132459.html)

* 当我们进入首页之后，再去点击底部的其他router-link,home界面的元素都会被销毁，所以不需要担心DOM文档过大的问题

## 23.created阶段设置宽度
* 设置元素样式不可以在created函数中设置，因为此时还没有渲染，我们可以在created中设置一个调用methods中函数的代码
* 在methods函数中去设置样式，这样子是可以的(例如下面的登录/注册页面中的css footer sticky布局)

## 24.登录/注册页面
1. 页面布局为css footer sticky 隐私政策默认在底部，当登录之后，顶部内容栏切换内容，中间内容栏增加选项栏，但是隐私政策几个字还是在底部
2. 删除旧的图标文本代码，引入新的图标文本，需要注意的是，我们自己去下载的svg图片有些自带color代码，所以不想一直使用那个颜色的话，那么就在style.styl文件中删除content下面的color默认代码
3. 选中所有的li?
```
	&:last-child
		.my-list_ul-text
			border-none()
			选中的是最后一个li的的text而不是每一个li的最后一个text都选中
```
4. 等待实现的功能:密码登录页面，手机号码登录页面，登陆之后的页面重中之重!


## 25.懒加载
* 使用vue-lazyload实现懒加载；首先下载vue-lazyload,然后在main.js文件中设置
* 首先设置error，加载失败时候显示的图片(注意使用require('')导入模块的方式导入图片)；loading:加载过程中显示的图片，然后try指的是一次加载尝试加载的图片数量
* 最后在home.vue的img中直接设置v-lazy就可以了，去掉src属性，因为会被渲染为data-src，不需要src了
* `注意:为了实现懒加载，我们商家的图片不能使用同一张了，所以我使用美食网址上的图片，在data.json中替换掉`
* [网址](http://www.sccnn.com/gaojingtuku/canyinmeishi/Default.Html)

<<<<<<< HEAD

## 26.网站图标
1. 在阿里巴巴矢量库下载一个16*16的png图标，然后再去[ico生成](http://ico.duduxuexi.com/)中转换为ico格式
2. 把图标放进static目录下面，然后再在build/webpack.dev.cong.js文件中添加`favicon: path.resolve(__dirname, '../static/favicon.ico')`,注意加上本地路径，否则获取失败
* [参考](https://www.cnblogs.com/chinabin1993/p/8509743.html)

## 27.display:block图片之后的文字
* 对一排图片使用display:block之后，图片后面的文字span是内联元素，和图片块级元素的边距很大
* 例子:login.vue,最后面的一排图标，`解决方法:对图片和文字都使用display:block，之后上下边距就消失了，原理未知!`

## 28.after伪类选择器
* 在password.vue中，使用after伪类选择器制作边缘线顶部失败，`需要给input嵌套一个div`

=======
## 26.scoped
* `vue组件中的style标签标有scoped属性时表明style里的css样式只适用于当前组件元素 `
* 所以我们之前在vue项目中存在同名的class,id类名时才会发生样式混乱，样式被复用啦!
* 使用了scoped属性之后，父组件的style样式将不会渗透到子组件中，然而子组件的根节点元素会同时被设置了scoped的父css样式和设置了scoped的子css样式影响，这么设计的目的是父组件可以对子组件根元素进行布局。 
* [参考](https://blog.csdn.net/one_girl/article/details/78737740)
>>>>>>> da6e453d29b2208d417d68c76fa31e150ca3e8db
